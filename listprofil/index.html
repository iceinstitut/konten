
<html>
  <head>
    <title>Form Profil Pengembang</title>
    <script src="../load-components.js"></script>
    <script src="../load-head.js"></script>
    <script src="../load-components.js"></script>
  <style>
    .placeholder-card {
      height: 220px;
      border: 1px solid #dee2e6;
      border-radius: 0.5rem;
      background-color: #f8f9fa;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { background-color: #f8f9fa; }
      50% { background-color: #e9ecef; }
      100% { background-color: #f8f9fa; }
    }
  </style>
  
  
  </head>
  <body>
    <div id="header"></div>

    <main class="container py-3">

    <div class="col-10 px-4 py-5 my-5 text-center mx-auto">
      <!-- <img class="d-block mx-auto mb-4" src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57"> -->
      <h1 class="display-5 fw-bold text-body-emphasis">Daftar Course dan Pengembang di<br>ICE Institute</h1>
      <div class="col-12 mx-auto">
        <p class="lead mb-4">Halaman ini menampilkan daftar mata kuliah beserta nama-nama pengembangnya, lengkap dengan fitur pencarian untuk memudahkan Anda menemukan informasi yang dibutuhkan. Jika Anda tidak menemukan nama mata kuliah yang Anda cari, silakan tambahkan data mata kuliah tersebut melalui tombol <strong>Add Course</strong>. Namun, apabila Anda menemukan nama mata kuliahnya tetapi tidak menemukan nama Anda tercantum sebagai pengembang, Anda juga dapat menambahkan nama Anda melalui tombol <strong>Add Course Dev</strong>. Pastikan data yang Anda masukkan akurat agar informasi tetap terjaga dan bermanfaat bagi semua pengguna.</p>
        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <a class="btn btn-primary btn-lg px-4 gap-3" href="https://iceinstitut.github.io/konten/profilmk/" target="_blank">Add Course</a>
        <a class="btn btn-outline-secondary btn-lg px-4" href="https://iceinstitut.github.io/konten/profildev/" target="_blank">Add Course Dev</a>
        </div>
      </div>
    </div>

    <div class="mb-3">
      <input type="text" id="searchInput" class="form-control form-control-lg" placeholder="Cari course, pengembang, atau institusi...">
    </div>

    <div class="mb-2 text-end text-muted" id="dataInfo"></div>

    <div id="cardContainer" class="row g-4">
      
    </div>

    <nav class="mt-4">
      <ul class="pagination justify-content-center" id="pagination"></ul>
    </nav>


    </main>

    <div id="footer"></div>

    <script>
    const apiUrl = "https://script.google.com/macros/s/AKfycbxSjfZh82J_TERGOgVpoxBJ4qqpeoDc-uQGec1Wz643V0IRwPgea_wfb5Bn3rAYcZ4x/exec"; // Ganti dengan URL JSON kamu
    let allData = [];
    let filteredData = [];
    const itemsPerPage = 12;
    let currentPage = 1;

    async function fetchData() {
      try {
        const res = await fetch(apiUrl);
        const data = await res.json();
        allData = data;
        filteredData = [...allData];
        renderPage(1);
      } catch (err) {
        const container = document.getElementById("cardContainer");
        container.innerHTML = "<p class='text-danger'>Gagal memuat data.</p>";
        console.error(err);
      }
    }

    function renderPage(page) {
      currentPage = page;
      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const pageItems = filteredData.slice(start, end);

      const container = document.getElementById("cardContainer");
      container.innerHTML = pageItems.map(item => `
        <div class="col-md-6 col-lg-4">
          <div class="card h-100 shadow-sm">
          <img src="${item.link_card || 'https://iceinstitut.github.io/image/aset/cover-default.jpg'}" class="card-img-top" alt="${item.nama_mk}" loading="lazy">
            <div class="card-body">
                <p class="card-text text-muted">${item.Partner}</p>
                <h4 class="card-title">${item.nama_mk}</h4>
                <p class="card-text"><strong>Kode:</strong> ${item.kode_mk}</p>
                <div class="row">
                  <div class="col-auto d-flex align-items-start flex-column">
                      <img class="mb-auto" src="https://cdn-icons-png.flaticon.com/512/10307/10307911.png" width="50">
                  </div>
                  <div class="col">
                      <p class="card-text"><strong> ${item.nama_dosen}</strong><br>${item.institusi_dosen}</p>
                  </div>
                </div>
            </div>
          </div>
        </div>
      `).join("");

      renderPagination();
      updateDataInfo(start, end, filteredData.length);
    }

    function renderPagination() {
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);
      const pagination = document.getElementById("pagination");
      pagination.innerHTML = "";

      const prevDisabled = currentPage === 1 ? "disabled" : "";
      const nextDisabled = currentPage === totalPages ? "disabled" : "";

      pagination.innerHTML += `
        <li class="page-item ${prevDisabled}">
          <a class="page-link" href="#" onclick="renderPage(${currentPage - 1})">Sebelumnya</a>
        </li>
      `;

      pagination.innerHTML += `
        <li class="page-item disabled">
          <a class="page-link" href="#">${currentPage} / ${totalPages}</a>
        </li>
      `;

      pagination.innerHTML += `
        <li class="page-item ${nextDisabled}">
          <a class="page-link" href="#" onclick="renderPage(${currentPage + 1})">Berikutnya</a>
        </li>
      `;
    }

    function updateDataInfo(start, end, total) {
      const shownEnd = Math.min(end, total);
      document.getElementById("dataInfo").textContent = `Menampilkan ${start + 1} - ${shownEnd} dari ${total} data`;
    }

    document.getElementById("searchInput").addEventListener("input", (e) => {
      const keyword = e.target.value.toLowerCase();
      filteredData = allData.filter(item =>
        item.nama_mk.toLowerCase().includes(keyword) ||
        item.kode_mk.toLowerCase().includes(keyword) ||
        item.Partner.toLowerCase().includes(keyword) ||
        item.nama_dosen.toLowerCase().includes(keyword) ||
        item.institusi_dosen.toLowerCase().includes(keyword)
      );
      renderPage(1);
    });

    // Tampilkan placeholder sebelum fetch
    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("cardContainer");
      container.innerHTML = Array.from({ length: 12 }).map(() => `
        <div class="col-md-6 col-lg-4">
          <div class="placeholder-card p-3"></div>
        </div>
      `).join("");
      fetchData();
    });
  </script>
  </body>
</html>
